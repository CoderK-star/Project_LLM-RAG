services:
  - type: web
    name: gca-backend
    runtime: docker
    dockerfilePath: ./backend/Dockerfile
    dockerContext: ./backend
    plan: free
    envVars:
      - key: LLM_MODEL_TYPE
        value: openai
      - key: LLM_MODEL_NAME
        value: gpt-4o-mini
      - key: EMBEDDING_MODEL_NAME
        value: text-embedding-3-small
      - key: OPENAI_API_KEY
        sync: false  # set manually in Render dashboard
      - key: SERVE_FRONTEND
        value: "false"
      - key: CORS_ORIGINS
        value: "*"  # restrict to your Cloudflare Pages URL after deploy
